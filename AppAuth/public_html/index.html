<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>AppAuth</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="css/headers.css" rel="stylesheet" type="text/css">
        <link href="css/buttons.css" rel="stylesheet" type="text/css">
        <link href="css/layout.css" rel="stylesheet" type="text/css">
        <link href="css/input_areas.css" rel="stylesheet" type="text/css">
        <script src="js/persona.js"></script>
        <script src="js/auth.js"></script>
        <style>
            html{font-size: xx-small;}
        </style>
    </head>
    <body>
        <section role="region">
            <header>
                <a href="#"><span class="icon icon-close">Close</span></a>
                <menu type="toolbar">
                    <button data-icon="user" onclick="navigator.id.request();">Login</button>
                </menu>
                <h1>AppAuth</h1>
                <h2></h2>
            </header>
        </section>
        <section class="gaia-list fit scroll sticky">
            <article>
                <header>User Profile</header>
                <ul>
                    <li>
                        <input type="email" disabled="" id="email" placeholder="Enter e-mail" />
                    </li>
                    <li>
                        <input type="text" id="nick" placeholder="Enter nick" />
                    </li>
                    <li>
                        <input type="text" id="name" placeholder="Enter name" />
                    </li>
                    <li>
                        <button id="save">Save</button>
                    </li>
                </ul>
            </article>
        </section>
        <script>
            document.getElementById("save").addEventListener("click", saveData);
            function saveData()
            {
                var dataObject = "{'email':'" + document.getElementById("email").value + "', 'nick':'" + document.getElementById("nick").value + "', 'name':'" + document.getElementById("name").value + "'}";
                var oReq = new XMLHttpRequest();
                oReq.onload = dataSaved;
                oReq.open("post", "http://k-firefoxos.appspot.com/objects");
                oReq.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
                oReq.send("appid=u6kvnq_1&owner=appauth&text=" + dataObject);
            }
            function dataSaved()
            {
                console.log(this.responseText);
            }
        </script>
    </body>
</html>
